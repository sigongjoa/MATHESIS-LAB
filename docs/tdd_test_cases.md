# 테스트 케이스 (Test Cases)

## 1. 개요
이 문서는 'MATHESIS LAB' 프로젝트의 사용자 스토리 및 기능 요구사항을 검증하기 위한 테스트 케이스를 정의합니다. 각 테스트 케이스는 특정 시나리오에 대한 입력, 예상 결과, 그리고 검증 단계를 명확히 하여 개발된 기능의 정확성과 안정성을 보장합니다.

## 2. 테스트 케이스 목록

### 2.1. 커리큘럼 맵 관리

*   **TC-CM-001: 커리큘럼 맵 생성 성공**
    *   **스토리:** 스토리 1
    *   **설명:** 유효한 제목과 설명을 입력하여 새 커리큘럼 맵을 생성한다.
    *   **사전 조건:** 사용자 로그인 상태.
    *   **입력:** 제목: "새로운 학습 로드맵", 설명: "인공지능 기초 과정"
    *   **기대 결과:**
        1.  HTTP 201 Created 응답.
        2.  응답 본문에 생성된 커리큘럼 맵의 고유 ID, 제목, 설명이 포함되어야 한다.
        3.  데이터베이스에 해당 커리큘럼 맵 정보가 저장되어야 한다.
*   **TC-CM-002: 커리큘럼 맵 생성 실패 (필수 필드 누락)**
    *   **스토리:** 스토리 1
    *   **설명:** 제목 없이 커리큘럼 맵 생성을 시도한다.
    *   **사전 조건:** 사용자 로그인 상태.
    *   **입력:** 제목: (빈 값), 설명: "인공지능 기초 과정"
    *   **기대 결과:**
        1.  HTTP 400 Bad Request 응답.
        2.  응답 본문에 "제목은 필수입니다."와 같은 오류 메시지가 포함되어야 한다.
*   **TC-CM-003: 노드 추가 성공 (최상위 노드)**
    *   **스토리:** 스토리 3
    *   **설명:** 특정 커리큘럼 맵에 최상위 노드를 추가한다.
    *   **사전 조건:** 커리큘럼 맵이 존재하고 사용자 로그인 상태.
    *   **입력:** `curriculum_id`: 유효한 ID, `title`: "AI 개요", `markdown_content`: "인공지능의 역사와 정의"
    *   **기대 결과:**
        1.  HTTP 201 Created 응답.
        2.  응답 본문에 생성된 노드의 고유 ID, 제목, 내용, `parent_node_id`가 `null`로 포함되어야 한다.
        3.  데이터베이스에 해당 노드 정보가 저장되어야 한다.
*   **TC-CM-004: 노드 순서 변경 성공**
    *   **스토리:** 스토리 6
    *   **설명:** 커리큘럼 맵 내 두 노드의 순서를 변경한다.
    *   **사전 조건:** 커리큘럼 맵에 2개 이상의 노드가 존재하고 사용자 로그인 상태.
    *   **입력:** `curriculum_id`: 유효한 ID, `node_orders`: `[{"node_id": "node_A_id", "order_index": 1}, {"node_id": "node_B_id", "order_index": 0}]`
    *   **기대 결과:**
        1.  HTTP 200 OK 응답.
        2.  해당 커리큘럼 맵을 조회했을 때 노드들의 `order_index`가 변경된 순서로 반영되어야 한다.

### 2.2. Zotero 연동

*   **TC-ZT-001: Zotero 문헌 검색 성공 (유효 태그)**
    *   **스토리:** 스토리 8
    *   **설명:** '난류' 태그로 Zotero 문헌을 검색한다.
    *   **사전 조건:** Zotero 서버에 '난류' 태그를 가진 문헌이 존재.
    *   **입력:** `tag_name`: "난류"
    *   **기대 결과:**
        1.  HTTP 200 OK 응답.
        2.  응답 본문에 '난류' 태그를 포함하는 문헌 목록 (최소 1개 이상)이 반환되어야 한다.
        3.  각 문헌은 `zotero_key`, `title`, `authors`, `tags` 등의 필수 정보를 포함해야 한다.
*   **TC-ZT-002: Zotero 문헌 검색 실패 (존재하지 않는 태그)**
    *   **스토리:** 스토리 8
    *   **설명:** 'ABCDEFG'와 같이 존재하지 않는 태그로 Zotero 문헌을 검색한다.
    *   **사전 조건:** 없음.
    *   **입력:** `tag_name`: "ABCDEFG"
    *   **기대 결과:**
        1.  HTTP 200 OK 응답.
        2.  응답 본문에 빈 문헌 목록 `[]`이 반환되어야 한다.
*   **TC-ZT-003: Zotero 문헌을 노드에 연결 성공**
    *   **스토리:** 스토리 8
    *   **설명:** 검색된 Zotero 문헌을 특정 노드에 연결한다.
    *   **사전 조건:** 노드 및 Zotero 문헌이 존재하고 사용자 로그인 상태.
    *   **입력:** `node_id`: 유효한 노드 ID, `zotero_item_id`: 유효한 Zotero 문헌 ID
    *   **기대 결과:**
        1.  HTTP 201 Created 응답.
        2.  응답 본문에 생성된 링크 정보가 포함되어야 한다.
        3.  해당 노드를 조회했을 때 `links` 배열에 Zotero 문헌 링크가 포함되어야 한다.

### 2.3. AI 보조 작가 (LLM) 기능

*   **TC-AI-001: 이미지 기반 Manim 코드 가이드라인 생성 성공**
    *   **스토리:** 스토리 11
    *   **설명:** 유효한 이미지 파일을 업로드하고 Manim 코드 가이드라인 생성을 요청한다.
    *   **사전 조건:** Vertex AI Gemini Pro Vision 서비스가 정상 작동.
    *   **입력:** 이미지 파일 (예: 간단한 도형 이미지), 프롬프트: "이 도형을 Manim으로 그리는 가이드라인을 줘."
    *   **기대 결과:**
        1.  HTTP 200 OK 응답.
        2.  응답 본문에 Manim 코드 생성에 도움이 되는 텍스트 가이드라인이 포함되어야 한다.
        3.  응답 시간은 10초 이내여야 한다.
*   **TC-AI-002: 노드 내용 요약 성공**
    *   **스토리:** 스토리 12
    *   **설명:** 긴 노드 내용을 AI에게 요약 요청한다.
    *   **사전 조건:** 노드에 충분한 길이의 `markdown_content`가 존재하고 Vertex AI Gemini Pro 서비스가 정상 작동.
    *   **입력:** `node_id`: 유효한 노드 ID, `request_type`: "summarize"
    *   **기대 결과:**
        1.  HTTP 200 OK 응답.
        2.  응답 본문에 원본 내용보다 짧은 요약 텍스트가 포함되어야 한다.
        3.  데이터베이스의 `NODE_CONTENTS` 테이블에 `ai_generated_summary` 필드가 업데이트되어야 한다.

### 2.4. YouTube 연동

*   **TC-YT-001: YouTube 영상 링크 연결 성공**
    *   **스토리:** 스토리 15
    *   **설명:** 유효한 YouTube 영상 URL을 노드에 연결한다.
    *   **사전 조건:** 노드가 존재하고 사용자 로그인 상태.
    *   **입력:** `node_id`: 유효한 노드 ID, `youtube_url`: "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
    *   **기대 결과:**
        1.  HTTP 201 Created 응답.
        2.  응답 본문에 생성된 링크 정보 (YouTube 영상 메타데이터 포함)가 포함되어야 한다.
        3.  해당 노드를 조회했을 때 `links` 배열에 YouTube 영상 링크가 포함되어야 한다.
*   **TC-YT-002: YouTube 영상 링크 연결 실패 (유효하지 않은 URL)**
    *   **스토리:** 스토리 15
    *   **설명:** 유효하지 않은 YouTube 영상 URL을 노드에 연결 시도한다.
    *   **사전 조건:** 노드가 존재하고 사용자 로그인 상태.
    *   **입력:** `node_id`: 유효한 노드 ID, `youtube_url`: "https://not-youtube.com/video"
    *   **기대 결과:**
        1.  HTTP 400 Bad Request 응답.
        2.  응답 본문에 "유효하지 않은 YouTube URL입니다."와 같은 오류 메시지가 포함되어야 한다.
